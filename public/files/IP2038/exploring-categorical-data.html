<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 13 Exploring Categorical Data | IP2038 - Analysing Political and Economic Data in the Real World - Course Material</title>
<meta name="author" content="Stefano Pagliari">
<meta name="description" content="This section focuses on exploring categorical data using summary statistics and visualizations. We start by looking at ways to analyze a single variable (univariate analysis) before introducing...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 13 Exploring Categorical Data | IP2038 - Analysing Political and Economic Data in the Real World - Course Material">
<meta property="og:type" content="book">
<meta property="og:description" content="This section focuses on exploring categorical data using summary statistics and visualizations. We start by looking at ways to analyze a single variable (univariate analysis) before introducing...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 13 Exploring Categorical Data | IP2038 - Analysing Political and Economic Data in the Real World - Course Material">
<meta name="twitter:description" content="This section focuses on exploring categorical data using summary statistics and visualizations. We start by looking at ways to analyze a single variable (univariate analysis) before introducing...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">IP2038 - Analysing Political and Economic Data in the Real World - Course Material</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introduction to the Module</a></li>
<li><a class="" href="rstudio-and-rstudio-cloud.html"><span class="header-section-number">2</span> RStudio and RStudio Cloud</a></li>
<li><a class="" href="getting-started-with-r.html"><span class="header-section-number">3</span> Getting Started with R</a></li>
<li><a class="" href="importing-data-into-r.html"><span class="header-section-number">4</span> Importing Data into R</a></li>
<li><a class="" href="inspecting-a-dataset.html"><span class="header-section-number">5</span> Inspecting a Dataset</a></li>
<li><a class="" href="data-visualization-with-ggplot.html"><span class="header-section-number">6</span> Data Visualization with ggplot</a></li>
<li><a class="" href="types-of-visualizations.html"><span class="header-section-number">7</span> Types of visualizations</a></li>
<li><a class="" href="data-wrangling-with-dplyr.html"><span class="header-section-number">8</span> Data Wrangling with dplyr</a></li>
<li><a class="" href="reshaping-the-data.html"><span class="header-section-number">9</span> Reshaping the data</a></li>
<li><a class="" href="relational-data.html"><span class="header-section-number">10</span> Relational Data</a></li>
<li><a class="" href="missing-data.html"><span class="header-section-number">11</span> Missing Data</a></li>
<li><a class="" href="exploring-numerical-data.html"><span class="header-section-number">12</span> Exploring Numerical Data</a></li>
<li><a class="active" href="exploring-categorical-data.html"><span class="header-section-number">13</span> Exploring Categorical Data</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="assessment-guidance.html"><span class="header-section-number">A</span> Assessment Guidance</a></li>
<li><a class="" href="list-of-datasets.html"><span class="header-section-number">B</span> List of Datasets</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="exploring-categorical-data" class="section level1" number="13">
<h1>
<span class="header-section-number">13</span> Exploring Categorical Data<a class="anchor" aria-label="anchor" href="#exploring-categorical-data"><i class="fas fa-link"></i></a>
</h1>
<p>This section focuses on exploring categorical data using summary statistics and visualizations. We start by looking at ways to analyze a single variable (univariate analysis) before introducing multivariate plots that visualize the relationship between multiple categorical variables.</p>
<div id="univariate-analysis-of-categorical-data" class="section level2" number="13.1">
<h2>
<span class="header-section-number">13.1</span> Univariate Analysis of Categorical Data<a class="anchor" aria-label="anchor" href="#univariate-analysis-of-categorical-data"><i class="fas fa-link"></i></a>
</h2>
<div id="frequency-tables" class="section level3" number="13.1.1">
<h3>
<span class="header-section-number">13.1.1</span> Frequency Tables<a class="anchor" aria-label="anchor" href="#frequency-tables"><i class="fas fa-link"></i></a>
</h3>
<p>A frequency table is a table that displays the frequency of various values in a variable. Each entry in the table contains the frequency or count of the occurrences of values within that variable.</p>
<p>The value that appears most often in a set of data values is known as the <strong>mode</strong>.</p>
<p>We can calculate how many cases fall into each category of our categorical variable of interest using the <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> function from the dplyr package.</p>
<p>For instance, letâ€™s look at the gapminder data, and identify the frequency of different continents.</p>
<div class="sourceCode" id="cb183"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>

<span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 5 Ã— 2</span>
<span class="co">#&gt;   continent     n</span>
<span class="co">#&gt;   &lt;fct&gt;     &lt;int&gt;</span>
<span class="co">#&gt; 1 Africa       52</span>
<span class="co">#&gt; 2 Americas     25</span>
<span class="co">#&gt; 3 Asia         33</span>
<span class="co">#&gt; 4 Europe       30</span>
<span class="co">#&gt; 5 Oceania       2</span></code></pre></div>
</div>
<div id="bar-chart" class="section level3" number="13.1.2">
<h3>
<span class="header-section-number">13.1.2</span> Bar Chart<a class="anchor" aria-label="anchor" href="#bar-chart"><i class="fas fa-link"></i></a>
</h3>
<p>A common visual tool to display the distribution of values in a categorical variable is through a bar chart.</p>
<p>A bar chart can be plotted in ggplot using the geom <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code>.</p>
<p>This function requires a single categorical variable to be mapped to the <code>x</code> aestetic within the <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> function.</p>
<p>Behind the scenes, the geom calculates the number of individual set of observations for each level of the selected variable, and makes the height of the bar proportional to this value.</p>
<p>For instance in the example below we visualize the distribution of the <code>continent</code> variable in the gapminder dataset, filtering for a single year. The resulting bar chart produce a different bar for each of the values in the selected variable, while the height is proportional to the number of types each value occurs. In this case the height of each bar represents the number of countries that belong to each of the five continents.</p>
<div class="sourceCode" id="cb184"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="co">#&gt; â”€â”€ Attaching packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 1.3.1 â”€â”€</span>
<span class="co">#&gt; âœ“ ggplot2 3.3.5     âœ“ purrr   0.3.4</span>
<span class="co">#&gt; âœ“ tibble  3.1.6     âœ“ stringr 1.4.0</span>
<span class="co">#&gt; âœ“ tidyr   1.1.4     âœ“ forcats 0.5.1</span>
<span class="co">#&gt; âœ“ readr   2.1.1</span>
<span class="co">#&gt; â”€â”€ Conflicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€</span>
<span class="co">#&gt; x dplyr::filter() masks stats::filter()</span>
<span class="co">#&gt; x dplyr::lag()    masks stats::lag()</span>

<span class="va">gap_2007</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span><span class="op">==</span><span class="fl">1997</span><span class="op">)</span>

<span class="co">#Plotting geom_bar without count variable</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">gap_2007</span>, 
       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Countries in Each Continent"</span>,
       subtitle <span class="op">=</span> <span class="st">"Year = 1997"</span>,
       caption <span class="op">=</span> <span class="st">"Gapminder data"</span>,
       x<span class="op">=</span><span class="st">"Continent"</span>, 
       y<span class="op">=</span><span class="st">"Frequency"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="92_Exploring_Categorical_Data_files/figure-html/unnamed-chunk-2-1.png" width="672"></div>
<div id="relative-frequencies" class="section level4" number="13.1.2.1">
<h4>
<span class="header-section-number">13.1.2.1</span> Relative Frequencies<a class="anchor" aria-label="anchor" href="#relative-frequencies"><i class="fas fa-link"></i></a>
</h4>
<p>While by default <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> visualizes a count of the number of observations associated with different values in the selected variable, in some cases we may want to chart the relative frequencies.</p>
<p>We can let geom_bar do the calculation by specifying within the function that the height of the bar should be a proportion, adding <code>y = ..prop..</code>,as in the example below.</p>
<div class="sourceCode" id="cb185"><pre class="downlit sourceCode r">
<code class="sourceCode R"> 
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>,
    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">..prop..</span>, group <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Countries in Each Continent"</span>,
       subtitle <span class="op">=</span> <span class="st">"Year = 1997"</span>,
       caption <span class="op">=</span> <span class="st">"Gapminder data"</span>,
       x<span class="op">=</span><span class="st">"Continent"</span>, 
       y<span class="op">=</span><span class="st">"Percentage"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="92_Exploring_Categorical_Data_files/figure-html/unnamed-chunk-3-1.png" width="672"></div>
</div>
<div id="geom_col" class="section level4" number="13.1.2.2">
<h4>
<span class="header-section-number">13.1.2.2</span> <code>geom_col()</code><a class="anchor" aria-label="anchor" href="#geom_col"><i class="fas fa-link"></i></a>
</h4>
<p>When we call geom_bar(), ggplot behind the scenes calculates the counts or proportions it displays. When the information we want to use to determine the heights of the bars is already stored in a variable in our dataset, we can use a related geom called <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code></p>
<p>This function requires the following variables to be mapped within the <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> function:</p>
<ul>
<li>
<code>x</code> = the categorical variable to be mapped on the x axis</li>
<li>
<code>y</code> = the height of the bars</li>
</ul>
<p>For instance, in the example below we replicate the previous visualization but we first create a new dataset that contains a variable <code>Continent_Count</code> that contains a count of the number of observations for each continent, and then calculate the percentage of all the observations that are associated with each continent in the variable <code>Pct_Continent</code>. This variable is then mapped to the y axis.
The expression <code>scale_y_continuous(labels = scales::percent)</code> is added to change the label of the y axis to from a simple number (e.g.Â 0.3) to a percentage (e.g.Â 30%).</p>
<div class="sourceCode" id="cb186"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Create new dataset with  count variable</span>
<span class="va">ds</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span><span class="op">==</span><span class="fl">1997</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">continent</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span> <span class="op">(</span>Continent_Count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Pct_Continent <span class="op">=</span> <span class="va">Continent_Count</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">Continent_Count</span><span class="op">)</span><span class="op">)</span>

<span class="co">#Plot with ggplot</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ds</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">continent</span>, y<span class="op">=</span> <span class="va">Pct_Continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/label_percent.html">percent</a></span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Countries in Each Continent"</span>,
       subtitle <span class="op">=</span> <span class="st">"Year = 1997"</span>,
       caption <span class="op">=</span> <span class="st">"Gapminder data"</span>,
       x<span class="op">=</span><span class="st">"Continent"</span>, 
       y<span class="op">=</span><span class="st">"Percentage"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="92_Exploring_Categorical_Data_files/figure-html/unnamed-chunk-4-1.png" width="672"></div>
</div>
<div id="horizontal-bars" class="section level4" number="13.1.2.3">
<h4>
<span class="header-section-number">13.1.2.3</span> Horizontal bars<a class="anchor" aria-label="anchor" href="#horizontal-bars"><i class="fas fa-link"></i></a>
</h4>
<p>Sometimes it is more convenient to have the bars oriented horizontally. In this case we set up the aesthetic mappings as usual and then flip the axes with the <code><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip()</a></code> command.</p>
<div class="sourceCode" id="cb187"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>,
    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> </code></pre></div>
<div class="inline-figure"><img src="92_Exploring_Categorical_Data_files/figure-html/unnamed-chunk-5-1.png" width="672"></div>
</div>
<div id="ordering-the-bars" class="section level4" number="13.1.2.4">
<h4>
<span class="header-section-number">13.1.2.4</span> Ordering the bars<a class="anchor" aria-label="anchor" href="#ordering-the-bars"><i class="fas fa-link"></i></a>
</h4>
<p><code>ggplot2</code> does not order the bars in the order you observe in your data frame. Sorting your data frame with <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> will not have any impact on your ggplot2 output. In order to change the order of the bars, we can use the function <code><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder()</a></code>. For instance, in the example below we map the x axis to <code>x = reorder(continent, -Count_Continent)</code>, which is the list of continent reordered according to the value on the variable <code>Count_Continent</code>. The <code>-</code> sign indicates a descending order.</p>
<p>You can reorder the bars based on a value:</p>
<div class="sourceCode" id="cb188"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">Gap_Count</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>Count_Continent <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> 

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">Gap_Count</span>,
       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">continent</span>, <span class="op">-</span><span class="va">Count_Continent</span><span class="op">)</span>, 
                     y <span class="op">=</span> <span class="va">Count_Continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Countries in Each Continent"</span>,
       subtitle <span class="op">=</span> <span class="st">"Year = 1997"</span>,
       caption <span class="op">=</span> <span class="st">"Gapminder data"</span>,
       x<span class="op">=</span><span class="st">"Continent"</span>, 
       y<span class="op">=</span><span class="st">"Frequency"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="92_Exploring_Categorical_Data_files/figure-html/unnamed-chunk-6-1.png" width="672"></div>
<p>It is also possible to reorder the bars manually. <code>ggplot2</code> does not order the bars in the order you observe in your data frame. Sorting your data frame with <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> will not have any impact on your ggplot2 output. In order to change the order of the bars, we can use the function <code><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder()</a></code>. For instance, in the example below we map the x axis to <code>x = reorder(continent, -Count_Continent)</code>, which is the list of continent reordered according to the value on the variable <code>Count_Continent</code>. The <code>-</code> sign indicates a descending order.</p>
<div class="sourceCode" id="cb189"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>continent <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">continent</span>, <span class="st">"Africa"</span>,
                             <span class="st">"Americas"</span>,
                             <span class="st">"Asia"</span>,
                             <span class="st">"Europe"</span>,
                             <span class="st">"Oceania"</span><span class="op">)</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> </code></pre></div>
<div class="inline-figure"><img src="92_Exploring_Categorical_Data_files/figure-html/unnamed-chunk-7-1.png" width="672"></div>
</div>
</div>
<div id="pie-chart" class="section level3" number="13.1.3">
<h3>
<span class="header-section-number">13.1.3</span> Pie Chart<a class="anchor" aria-label="anchor" href="#pie-chart"><i class="fas fa-link"></i></a>
</h3>
<p>A pie chart can be used to represent the same information as a bar chart. While pie charts are helpful to provide an overview of the main cases, they are less clear than bar charts when it comes with comparing the size of different groups.</p>
<div class="sourceCode" id="cb190"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">Gap_Count</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>Count_Continent <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Perc_Continent <span class="op">=</span> <span class="va">Count_Continent</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">Count_Continent</span><span class="op">)</span><span class="op">)</span>


<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">Gap_Count</span>, 
       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">""</span>, y<span class="op">=</span><span class="va">Perc_Continent</span>, fill<span class="op">=</span><span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span>width<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_polar.html">coord_polar</a></span><span class="op">(</span><span class="st">"y"</span>, start<span class="op">=</span><span class="fl">0</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Countries in Each Continent"</span>,
       subtitle <span class="op">=</span> <span class="st">"Year = 1997"</span>,
       caption <span class="op">=</span> <span class="st">"Gapminder data"</span>,
       y<span class="op">=</span><span class="st">"Percentage"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="92_Exploring_Categorical_Data_files/figure-html/unnamed-chunk-8-1.png" width="672"></div>
</div>
</div>
<div id="bivariate-analysis-of-two-categorical-variables" class="section level2" number="13.2">
<h2>
<span class="header-section-number">13.2</span> Bivariate Analysis of Two Categorical Variables<a class="anchor" aria-label="anchor" href="#bivariate-analysis-of-two-categorical-variables"><i class="fas fa-link"></i></a>
</h2>
<div id="contingency-table" class="section level3" number="13.2.1">
<h3>
<span class="header-section-number">13.2.1</span> Contingency Table<a class="anchor" aria-label="anchor" href="#contingency-table"><i class="fas fa-link"></i></a>
</h3>
<p>A <strong>contingency table</strong> is a table that summarize data for two categorical variables. Each value in the table summarize the number of times a combination of different values in the two categorical variables is found.</p>
<p>TO BE COMPLETED</p>

</div>
</div>
</div>



<div class="chapter-nav">
<div class="prev"><a href="exploring-numerical-data.html"><span class="header-section-number">12</span> Exploring Numerical Data</a></div>
<div class="next"><a href="assessment-guidance.html"><span class="header-section-number">A</span> Assessment Guidance</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#exploring-categorical-data"><span class="header-section-number">13</span> Exploring Categorical Data</a></li>
<li>
<a class="nav-link" href="#univariate-analysis-of-categorical-data"><span class="header-section-number">13.1</span> Univariate Analysis of Categorical Data</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#frequency-tables"><span class="header-section-number">13.1.1</span> Frequency Tables</a></li>
<li><a class="nav-link" href="#bar-chart"><span class="header-section-number">13.1.2</span> Bar Chart</a></li>
<li><a class="nav-link" href="#pie-chart"><span class="header-section-number">13.1.3</span> Pie Chart</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#bivariate-analysis-of-two-categorical-variables"><span class="header-section-number">13.2</span> Bivariate Analysis of Two Categorical Variables</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#contingency-table"><span class="header-section-number">13.2.1</span> Contingency Table</a></li></ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>
</div>
  

  

</div>
 <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>IP2038 - Analysing Political and Economic Data in the Real World - Course Material</strong>" was written by Stefano Pagliari. It was last built on 2022-03-13.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
